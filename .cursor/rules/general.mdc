---
description: StreamKeys Monorepo - Root Configuration
alwaysApply: true
---

# StreamKeys Monorepo

This is a monorepo containing two applications:

- **apps/extension/** - Browser extension for streaming services
- **apps/homepage/** - Marketing website (Astro + Tailwind)

## App-Specific Rules

When working on files, load the appropriate app rules:
- Files in `apps/extension/` → Load rules from `apps/extension/.cursor/rules/`
- Files in `apps/homepage/` → Load rules from `apps/homepage/.cursor/rules/`

## Shared Policies

### npm Sandbox Constraint

**All `npm` commands MUST be executed with `required_permissions: ['all']`** because toolchains need unrestricted access to `node_modules/`.

### Cursor Rules Maintenance

Cursor rules are located in `.cursor/rules/` at the root, in each app directory, and nested in subdirectories within apps (e.g., `apps/extension/src/services/.cursor/rules/`).

**Hard Constraints:**

1. **Rule Review in Plans**: When operating in plan mode, ALWAYS include a step to review and update relevant cursor rules at the end of the plan. This ensures documentation stays synchronized with implementation changes.

2. **New Rule Consideration**: When in plan mode implementing complex functionality (new patterns, architectural changes, new integrations), the agent MUST:
   - First assess whether a new cursor rule would benefit future development
   - If benefits exist, describe the specific reasons (e.g., "This introduces a new state management pattern that future agents need to understand to avoid breaking changes")
   - Propose a name for the rule (e.g., `components.mdc`, `state-management.mdc`)
   - Then ask the user whether to add creating a new cursor rule to the plan
   - Only ask when there are clear benefits - do not ask for simple changes

3. **Never remove or significantly modify existing rules** without explicit user confirmation. When rules appear outdated, ASK the user before making changes. Only add new rules or make minor clarifications without asking.
