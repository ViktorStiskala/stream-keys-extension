---
description: StreamKeys Extension - Project Structure
alwaysApply: true
---

# Project Structure

```
stream-keys/
├── src/
│   ├── background/          # Service worker
│   │   └── index.ts         # Routes to appropriate handler based on URL
│   ├── features/            # Composable feature modules
│   │   ├── restore-position/
│   │   ├── subtitles/
│   │   └── keyboard/
│   ├── ui/                  # UI utilities
│   │   ├── banner.ts
│   │   ├── overlay.ts
│   │   └── styles/
│   ├── core/                # Core utilities
│   │   ├── focus.ts
│   │   ├── fullscreen.ts
│   │   ├── player.ts
│   │   ├── video.ts
│   │   └── settings.ts
│   ├── handlers/            # Handler factory and types
│   │   ├── factory.ts       # createHandler() with feature composition
│   │   ├── index.ts         # Handler exports
│   │   └── types.ts         # Handler type definitions
│   ├── services/            # Service-specific implementations
│   │   ├── disney.ts        # Disney+ handler
│   │   ├── hbomax.ts        # HBO Max handler
│   │   ├── youtube.ts       # YouTube handler
│   │   └── bbc.ts           # BBC iPlayer handler
│   ├── settings/            # Options page
│   │   ├── index.ts
│   │   └── settings.css
│   └── types/               # Shared type definitions
│       └── index.ts
├── vite.config.ts           # Vite build configuration
├── tsconfig.json            # TypeScript configuration
└── manifest.json            # Extension manifest (old, kept for reference)
```

## Adding New Streaming Services

1. Create new service handler in `src/services/` folder (e.g., `netflix.ts`)
2. **Add debug console forwarding at the top of the file** (see debugging rules)
3. Use `createHandler(config)` with service-specific config and feature flags
4. Add URL matching in `src/background/index.ts` router
5. Add host permissions in `src/manifest.json`
6. Create service-specific Cursor rules file in `src/services/.cursor/rules/` (e.g., `netflix.mdc`)
