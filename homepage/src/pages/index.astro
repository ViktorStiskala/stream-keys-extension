---
import Layout from "../layouts/Layout.astro";
import KeyboardKey from "../components/KeyboardKey.astro";
import FeatureCard from "../components/FeatureCard.astro";
import ServiceBadge from "../components/ServiceBadge.astro";
import RestoreDialog from "../components/RestoreDialog.astro";
import InlineKey from "../components/ui/InlineKey.astro";
import CheckItem from "../components/ui/CheckItem.astro";
import BrowserCard from "../components/ui/BrowserCard.astro";
import DemoKey from "../components/ui/DemoKey.astro";
import { Icon } from "astro-icon/components";

const links = {
  chromeWebStore:
    "https://chromewebstore.google.com/detail/stream-keys-video-keyboar/opmlgkagmnkphbhagemjiconiencmpgd?hl=en",
  firefoxAddons:
    "https://addons.mozilla.org/en-US/firefox/addon/stream-keys-video-controls/",
  githubReleases:
    "https://github.com/ViktorStiskala/chrome-stream-keys/releases/latest",
  githubRepo: "https://github.com/ViktorStiskala/chrome-stream-keys",
  githubLicense:
    "https://github.com/ViktorStiskala/chrome-stream-keys/blob/main/LICENSE",
};

const services = [
  {
    name: "Disney+",
    color: "#113ccf",
    icon: "streamline-logos:disney-plus-logo-block",
    features: [
      "Space to play/pause",
      "F for fullscreen",
      "C for subtitles",
      "Arrow keys to seek",
      "Position restore",
    ],
  },
  {
    name: "HBO Max",
    color: "#b103fc",
    icon: "streamline-logos:hbo-max-logo-block",
    features: [
      "Space to play/pause",
      "F for fullscreen",
      "C for subtitles",
      "Custom seek times",
      "Position restore",
    ],
  },
  {
    name: "BBC iPlayer",
    color: "#ff4d4d",
    icon: "streamline-logos:bbc-iplayer-logo-1-block",
    features: [
      "Space to play/pause",
      "F for fullscreen",
      "C for subtitles",
      "Arrow keys to seek",
      "Custom seek times",
      "Position restore",
    ],
  },
  {
    name: "YouTube",
    color: "#ff0000",
    icon: "streamline-logos:youtube-clip-logo-solid",
    features: [
      "Position restore",
      "Save positions with S",
      "Native shortcuts preserved",
    ],
  },
];

const shortcuts = [
  {
    key: "Space",
    label: "Play / Pause",
    description: "Toggle playback anywhere, regardless of focus",
  },
  {
    key: "F",
    label: "Fullscreen",
    description: "Enter or exit fullscreen mode",
  },
  {
    key: "C",
    label: "Subtitles",
    description: "Toggle captions based on your preferences",
  },
  {
    key: "R",
    label: "Restore",
    description: "Jump back to previous positions",
  },
  { key: "S", label: "Save", description: "Bookmark your current position" },
  { key: "←/→", label: "Seek", description: "Rewind or fast-forward" },
];
---

<Layout title="Stream Keys Browser Extension – Video Keyboard Controls">
  <!-- Hero Section -->
  <section
    class="relative min-h-screen flex items-center justify-center px-4 py-20 overflow-hidden"
  >
    <!-- Background decoration -->
    <div
      class="absolute top-1/4 left-1/4 w-96 h-96 bg-accent/10 rounded-full blur-3xl"
    >
    </div>
    <div
      class="absolute bottom-1/4 right-1/4 w-72 h-72 bg-gold/10 rounded-full blur-3xl"
    >
    </div>

    <div class="relative z-10 max-w-4xl mx-auto text-center">
      <!-- Logo -->
      <div class="animate-fade-in mb-8 shadow-md">
        <img
          src="/images/icon.svg"
          alt="Stream Keys"
          class="w-32 h-32 mx-auto mb-6 drop-shadow-2xl"
        />
      </div>

      <!-- Title -->
      <h1
        class="animate-fade-in delay-100 text-5xl md:text-7xl font-bold mb-6 font-display tracking-tight"
      >
        <span class="gradient-text">Stream Keys</span>
      </h1>

      <!-- Tagline -->
      <p
        class="animate-fade-in delay-200 text-xl md:text-2xl text-text-muted mb-2 max-w-2xl mx-auto leading-relaxed"
      >
        YouTube-style keyboard shortcuts for streaming services
      </p>
      <p
        class="animate-fade-in delay-200 text-base text-text-subtle mb-8 max-w-2xl mx-auto"
      >
        A free browser extension for Chrome, Firefox, Safari, and Edge
      </p>

      <!-- Key highlights -->
      <div
        class="animate-fade-in delay-300 flex flex-wrap justify-center gap-4 mb-12"
      >
        <KeyboardKey
          label="Space"
          description="Play/Pause"
          animate
          href="#restore"
        />
        <KeyboardKey label="F" description="Fullscreen" href="#restore" />
        <KeyboardKey label="C" description="Subtitles" href="#restore" />
        <KeyboardKey label="R" description="Restore" href="#restore" />
      </div>

      <!-- Problem statement -->
      <p
        class="animate-fade-in delay-400 text-text-muted mb-4 max-w-xl mx-auto"
      >
        Ever pressed Space to pause and accidentally skipped to the next
        episode? Or restarted the entire movie? Or hit a button you didn't mean
        to press?
      </p>
      <p
        class="animate-fade-in delay-400 text-text-muted mb-10 max-w-xl mx-auto"
      >
        Stream Keys fixes these infuriating moments – your keyboard shortcuts
        finally work the way they should.
      </p>

      <!-- CTAs -->
      <div
        class="animate-fade-in delay-500 flex flex-wrap justify-center gap-4"
      >
        <a
          href="#install"
          class="inline-flex items-center gap-2 px-6 py-3 bg-accent hover:bg-accent-bright text-white font-semibold rounded-xl transition-all duration-200 hover:scale-105 glow-accent"
        >
          <Icon name="material-symbols:download-rounded" class="w-5 h-5" />
          Download
        </a>
        <a
          href="#restore"
          class="inline-flex items-center gap-2 px-6 py-3 bg-surface hover:bg-bg-card text-text font-semibold rounded-xl border border-border transition-all duration-200 hover:border-accent/50"
        >
          Learn More
          <svg
            class="w-4 h-4"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M19 9l-7 7-7-7"></path>
          </svg>
        </a>
      </div>

      <!-- Browser badges -->
      <div
        class="animate-fade-in delay-600 flex justify-center items-center gap-6 mt-8"
      >
        <Icon name="logos:chrome" class="w-6 h-6" title="Chrome" />
        <Icon name="logos:firefox" class="w-6 h-6" title="Firefox" />
        <Icon name="logos:safari" class="w-6 h-6" title="Safari" />
        <Icon name="logos:microsoft-edge" class="w-6 h-6" title="Edge" />
      </div>
    </div>

    <!-- Scroll indicator -->
    <div class="absolute bottom-8 left-1/2 -translate-x-1/2 animate-bounce">
      <svg
        class="w-6 h-6 text-text-subtle"
        fill="none"
        viewBox="0 0 24 24"
        stroke="currentColor"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M19 14l-7 7m0 0l-7-7m7 7V3"></path>
      </svg>
    </div>
  </section>

  <!-- Interactive Demo Section -->
  <section
    id="restore"
    class="py-24 px-8 bg-linear-to-b from-transparent via-bg-elevated/50 to-transparent"
  >
    <div class="max-w-6xl mx-auto">
      <div class="text-center mb-16">
        <h2 class="text-3xl md:text-4xl font-bold mb-4 font-display">
          Never Lose Your Spot – <span class="text-accent">Undo for Video</span>
        </h2>
        <p class="text-text-muted max-w-2xl mx-auto mb-8">
          Press <InlineKey class="min-w-[28px] h-7 px-2 mx-1 text-sm"
            >R</InlineKey
          >
          to instantly jump back to where you were. Perfect for when you overshoot
          a skip, your finger slips on the trackpad, or you want to rewatch that
          line you didn't quite catch – then return exactly where you were.
        </p>
        <div
          class="inline-flex items-center gap-3 px-6 py-4 bg-accent/2 border border-accent/30 rounded-full text-base font-medium text-accent"
        >
          <span class="relative flex items-center justify-center">
            <span
              class="absolute w-5 h-5 rounded-full border-2 border-red-500/50"
            ></span>
            <Icon
              name="material-symbols:fiber-manual-record"
              class="w-4 h-4 animate-pulse text-red-500"
            />
          </span>
          Interactive Demo – try pressing the keys.
        </div>
      </div>

      <div class="grid lg:grid-cols-2 gap-12 items-center">
        <div
          class="text-center lg:text-left max-w-xl mx-auto lg:mx-0 lg:max-w-none"
        >
          <!-- Keyboard Shortcuts -->
          <h3
            class="text-base font-semibold text-text-muted uppercase tracking-wider mb-6"
          >
            Keyboard Shortcuts
          </h3>
          <div
            class="flex flex-wrap justify-center lg:justify-start gap-6 mb-6"
          >
            <DemoKey
              id="demo-key-r"
              label="R"
              description="Toggle Restore Dialog"
              ariaLabel="Press R to toggle restore dialog"
            />
            <DemoKey
              id="demo-key-s"
              label="S"
              description="Save Current Position"
              ariaLabel="Press S to save current position"
            />
          </div>
          <p class="text-text-muted text-sm mb-8 text-left">
            Seek anywhere in the video – previous position saves automatically.
            Changed your mind? Press <InlineKey>R</InlineKey> to open position restore
            dialog, and instantly jump back.
          </p>

          <!-- Supported Features -->
          <h3
            class="text-base font-semibold text-text-muted uppercase tracking-wider mb-6"
          >
            Supported Features
          </h3>
          <ul class="space-y-4 mb-8 text-left inline-block">
            <CheckItem>
              Saves load position when the video restores to last known position
            </CheckItem>
            <CheckItem>
              Manually saved positions (press <InlineKey>S</InlineKey> to bookmark)
            </CheckItem>
            <CheckItem
              >Up to 3 recent positions from before you seeked</CheckItem
            >
            <CheckItem>
              One-key access – press <InlineKey>0</InlineKey>–<InlineKey
                >4</InlineKey
              > to jump directly
            </CheckItem>
          </ul>

          <p class="text-sm text-text-subtle italic text-left">
            It's like undo for video navigation.
          </p>
        </div>

        <div class="lg:pl-8 flex justify-center lg:justify-start">
          <RestoreDialog />
        </div>
      </div>

      <!-- Fake Video Progress Bar -->
      <div class="mt-5 max-w-4xl mx-auto">
        <div class="bg-bg-card/80 rounded-xl p-4 border border-border/50">
          <!-- Video info bar -->
          <div class="flex items-center justify-between mb-3 text-base">
            <div>
              <div id="video-title" class="font-semibold text-text">
                Stream Keys Extension
              </div>
              <div id="video-subtitle" class="text-text-muted text-sm">
                S1 E1: The Beginning
              </div>
            </div>
            <span
              id="video-time-remaining"
              class="font-mono tabular-nums text-sm text-text">-1:15:28</span
            >
          </div>

          <!-- Progress bar with reset button -->
          <div class="flex items-center gap-3">
            <div
              id="video-progress-container"
              class="relative flex-1 h-2 bg-white/10 rounded-full cursor-pointer group"
            >
              <!-- Progress fill -->
              <div
                id="video-progress-fill"
                class="absolute top-0 left-0 h-full bg-white/80 rounded-full transition-[width] duration-100"
                style="width: 16.1%"
              >
              </div>

              <!-- Scrubber -->
              <div
                id="video-progress-scrubber"
                class="absolute top-1/2 -translate-y-1/2 -translate-x-1/2 w-4 h-4 bg-white rounded-full shadow-lg opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none"
                style="left: 16.1%"
              >
              </div>

              <!-- Hover tooltip -->
              <div
                id="video-progress-tooltip"
                class="absolute -top-10 -translate-x-1/2 px-2 py-1 bg-black/90 text-white text-xs font-mono rounded opacity-0 transition-opacity pointer-events-none whitespace-nowrap"
                style="left: 50%"
              >
                45:00
              </div>
            </div>

            <!-- Reset button -->
            <button
              id="video-reset-btn"
              class="shrink-0 p-2 rounded-full text-text-muted hover:text-accent hover:bg-surface transition-colors cursor-pointer flex items-center justify-center"
              aria-label="Reset playback"
              title="Reset playback"
            >
              <Icon
                name="system-uicons:reset"
                class="w-5 h-5"
                stroke-width="2"
              />
            </button>
          </div>

          <!-- Instructions -->
          <div class="mt-3 text-xs text-text-subtle text-center">
            Click or drag the progress bar to seek • Your pre-seek position will
            be saved to history
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Features Section -->
  <section id="features" class="py-24 px-4">
    <div class="max-w-6xl mx-auto">
      <div class="text-center mb-16">
        <h2 class="text-3xl md:text-4xl font-bold mb-4 font-display">
          Keyboard Shortcuts That <span class="text-accent">Actually Work</span>
        </h2>
        <p class="text-text-muted max-w-2xl mx-auto">
          No more surprise skips, no more dead keys after fullscreen, no more
          hunting for the subtitle menu. Every shortcut does exactly what you
          expect, every single time.
        </p>
      </div>

      <!-- Shortcuts grid -->
      <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-6 mb-20">
        {
          shortcuts.map((shortcut, i) => (
            <div class={`text-center animate-fade-in delay-${(i + 1) * 100}`}>
              <KeyboardKey label={shortcut.key} size="lg" />
              <h4 class="mt-3 font-semibold text-text">{shortcut.label}</h4>
              <p class="mt-1 text-xs text-text-muted">{shortcut.description}</p>
            </div>
          ))
        }
      </div>

      <!-- Feature cards -->
      <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
        <FeatureCard
          title="Works in Fullscreen"
          description="All shortcuts work reliably in fullscreen mode, including after you exit fullscreen. No more clicking to regain focus."
          icon="tabler:arrows-maximize"
        />
        <FeatureCard
          title="Media Keys Support"
          description="Those play/pause and skip buttons on your keyboard? They actually work on streaming sites now. Rewind or skip forward just like the on-screen buttons – without switching tabs."
          icon="heroicons:play-pause-solid"
        />
        <FeatureCard
          title="Custom Skip Time"
          description="Hate waiting through 10-second skips during boring scenes? Set your own skip time – 30 seconds, 60 seconds, whatever works for you. Skip intros and recaps in one press."
          icon="material-symbols:timer-play"
        />
        <FeatureCard
          title="One-Key Subtitle Toggle"
          icon="material-symbols:closed-caption-rounded"
        >
          <p class="text-sm text-text-muted leading-relaxed">
            No more hunting through menus to turn captions on or off. Press <InlineKey
              >C</InlineKey
            > to get your preferred language instantly – or turn them off just as
            fast. Set your language preferences in the extension settings.
          </p>
        </FeatureCard>
        <FeatureCard
          title="Privacy First"
          description="Zero tracking, zero data collection. Your viewing habits are yours alone. No analytics, no data mining. Open source code you can inspect yourself. Just keyboard shortcuts."
          icon="material-symbols:shield-lock-rounded"
        />
        <FeatureCard
          title="Blazingly Fast"
          description="You won't even notice it's there – no slowdowns, no popups, no interference. Only activates on streaming sites, sleeps everywhere else."
          icon="material-symbols:rocket-launch-rounded"
        />
      </div>
    </div>
  </section>

  <!-- Supported Services Section -->
  <section id="services" class="py-24 px-4">
    <div class="max-w-6xl mx-auto">
      <div class="text-center mb-16">
        <h2 class="text-3xl md:text-4xl font-bold mb-4 font-display">
          Supported Services
        </h2>
        <p class="text-text-muted max-w-2xl mx-auto">
          Stream Keys works with major streaming platforms. Each service can be
          individually enabled or disabled in the extension settings.
        </p>
      </div>

      <div class="grid sm:grid-cols-2 lg:grid-cols-4 gap-6">
        {
          services.map((service) => (
            <ServiceBadge
              name={service.name}
              color={service.color}
              icon={service.icon}
              features={service.features}
            />
          ))
        }
      </div>
    </div>
  </section>

  <!-- Installation Section -->
  <section
    id="install"
    class="py-24 px-4 bg-gradient-to-b from-transparent via-bg-elevated/50 to-transparent"
  >
    <div class="max-w-4xl mx-auto text-center">
      <h2 class="text-3xl md:text-4xl font-bold mb-4 font-display">
        Get Stream Keys
      </h2>
      <p class="text-text-muted mb-12 max-w-xl mx-auto">
        Install in one click and say goodbye to broken keyboard controls. Free
        forever, works on all major browsers.
      </p>

      <!-- Browser options -->
      <div class="grid sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
        <BrowserCard
          name="Chrome"
          icon="logos:chrome"
          href={links.chromeWebStore}
          label="Chrome Web Store"
        />
        <BrowserCard
          name="Firefox"
          icon="logos:firefox"
          href={links.firefoxAddons}
          label="Firefox Add-ons"
        />
        <BrowserCard
          name="Safari"
          icon="logos:safari"
          href={links.githubReleases}
          label="Download DMG"
        />
        <BrowserCard
          name="Edge"
          icon="logos:microsoft-edge"
          href={links.githubReleases}
          label="Download ZIP"
        />
      </div>

      <!-- GitHub download -->
      <div class="flex justify-center mb-12">
        <a
          href={links.githubReleases}
          class="inline-flex items-center gap-2 px-6 py-3 bg-surface hover:bg-bg-card text-text font-semibold rounded-xl border border-border transition-all duration-200 hover:border-accent/50"
        >
          <Icon name="streamline-logos:github-logo-2-solid" class="w-5 h-5" />
          Download from GitHub
        </a>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="py-12 px-4 border-t border-border">
    <div class="max-w-6xl mx-auto">
      <div class="flex flex-col md:flex-row items-center justify-between gap-6">
        <div class="flex items-center gap-3 md:flex-1">
          <img src="/images/icon.svg" alt="Stream Keys" class="w-8 h-8" />
          <span class="font-semibold">Stream Keys</span>
        </div>

        <div class="flex items-center gap-6 text-sm text-text-muted">
          <a
            href={links.githubRepo}
            class="inline-flex items-center gap-1.5 hover:text-text transition-colors"
          >
            <Icon name="streamline-logos:github-logo-2-solid" class="w-4 h-4" />
            GitHub
          </a>
          <a
            href={links.githubLicense}
            class="inline-flex items-center gap-1.5 hover:text-text transition-colors"
          >
            <Icon name="material-symbols:license-rounded" class="w-4 h-4" />
            MIT License
          </a>
        </div>

        <p class="text-sm text-text-subtle md:flex-1 md:text-right">
          Zero tracking. Zero ads. Just keyboard shortcuts.
        </p>
      </div>
    </div>
  </footer>
</Layout>
